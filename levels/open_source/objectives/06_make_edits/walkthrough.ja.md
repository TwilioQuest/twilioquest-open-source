# ピクセル

プロジェクトをローカルにコピーし、開発ブランチを作成したことにより、貢献するための準備が整いました。しかしその前に、プロジェクトを設定して実行する必要があります。これにより、自分のコンピューターで変更を確認してから、GitHubに戻し、他のユーザーに確認してもらうことができます。

## Node.jsとNPM

Open Pixel ArtプロジェクトはNode.js上に構築され、`npm`も使用します。このミッションでは、`npm`の動作を理解しており、npmがインストールされていることを前提としています。

これらのツールに慣れていない場合には、[こちらのインストールガイドに従いNode.jsをインストール](https://www.taniarascia.com/how-to-install-and-use-node-js-and-npm-mac-and-windows/)してください。Node.jsをインストールした後、このミッションで`npm`コマンドをコピーして貼り付けることができます。

## プロジェクトの依存関係をインストールする

Node.jsと`npm`がインストールされた後、Open Pixel Artプロジェクトのメインフォルダで次のコマンドを実行します。

```
npm install
```

これにより、このプロジェクトを実行するために必要なすべてのコード依存関係がお使いのコンピューターにダウンロードされます。これで、依存関係のインストールのステータスメッセージが表示されるはずです。

この処理には時間がかかる場合があります。

## 起動する

これでプロジェクトがインストールされ、構成されました。次に、プロジェクトをローカルで起動しましょう。リポジトリのルートディレクトリで次のコマンドを実行します。

```
npm start
```

これにより、コンピューターでローカルWebサーバーが起動し、独自のバージョンのOpen Pixel Projectが実行されます。ターミナルでは、サーバーの起動後に、通常は次のURLが表示されているはずです。

```url
http://localhost:8080
```

このページをWebブラウザで開き、ローカルのOpen Pixel Artプロジェクトページをライブで表示します。

## Pixels.json

ピクセルをローカルで表示できることが確認できます。ピクセルを変更する方法を学習しましょう。任意のテキストエディタでOpen Pixel Artプロジェクトを開きます。`_data/pixels.json`にあるファイルを開きます。

このファイルの中には、次のようなピクセルオブジェクトのJSON配列があります。

```diff
{
  "data": [
    { "y": 1, "x": 1, "color": "#F22F46", "username": "<UNCLAIMED>" },
    { "y": 1, "x": 2, "color": "#F22F46", "username": "<UNCLAIMED>" },
    { "y": 1, "x": 3, "color": "#F22F46", "username": "<UNCLAIMED>" },
    ...
  ]
}
```

## ピクセルオブジェクトのプロパティ

- `x`: ピクセルのx座標。0はピクセルの左端の列です
- `y`: ピクセルのy座標。0はピクセルの一番下の行です
- `color`: ピクセルの16進コードでの色（赤の#ff0000など）
- `username`: プルリクエストの作成に使用するGitHubユーザー名

`_data/pixels.json`ファイルに、次のような新しい行を作成します。

```diff
{
  "data": [
+    { "y": 1, "x": 2, "color": "#FFFF00", "username": "cedric" },
    { "y": 1, "x": 3, "color": "#F22F46", "username": "<UNCLAIMED>" },
    ...
  ]
}
```

これで、ローカルにホストされているURLに新しいピクセルが表示されます。

## ソートする

`_data/pixels.json`に追加されたピクセルが、ソートされた順番で追加されていることを確認します。`y`で始まり、次に`x`となるはずです。また、このソートを実行するnpmタスクも追加されました。

```bash
npm run sort:open-pixels
```

新しいピクセルを追加した後、ターミナルでこれを実行してピクセルファイルを再ソートします。

## すべてが機能することを確認する

変更を完了する前に、`npm`コマンドを最後に1つ実行します。このコマンドは`npm test`と呼ばれます。ほとんどのオープンソースプロジェクトには、自動テストのスイートが用意されています。これにより、プロジェクトを壊すような変更をしていないことを確認できます。

新しい[Terminal]タブまたはウィンドウを開き、次のコマンドを実行します。

```
npm test
```

失敗したテストがなければ、すべて`passed`と表示されるはずです。これはすべてが機能していることを意味します。

## 変更を確認する方法

キャンバスにピクセルを追加し、何も壊れていないことを確認しました。

次に、`git`に変更が問題ないことを知らせる必要があります。これは`commit`と呼ばれるものを作成して行います。commit（コミット）とは、ある時点でキャプチャされたコードベースの1つのスナップショットです。

## コミットの方法

まず、コミットするファイルを追加します。これは変更するファイルを追加するだけです。つまり、このコミットでは、更新した`_data/pixels.json`ファイルのみを追加します。

```
git add _data/pixels.json
```

正しいファイルが追加されたことを確認するには、次のコマンドを実行します。

```
git status
```

このコマンドを実行すると、コミットしようとしているファイルが緑で表示されます。リストされている唯一のファイルは、`_data/pixels.json`のはずです。

次に、`git commit`コマンドを使用して変更を確定する必要があります。また、このコマンドに`-m`フラグを追加し、コミットとともにメッセージを追加します。

メッセージの前の`feat(pixels):`部分は、Open Pixel Artプロジェクトでコミットメッセージをプログラムで分析できるように追加したものです。この詳細については[Conventional Commits Standard](https://www.conventionalcommits.org/en/v1.0.0-beta.4/)を参照してください。

```
git commit -m "feat(pixels): add my new pixel"
```

## ハックしましょう！

このミッションには多くのステップがありました。しかし、これで新しいピクセルをコミットし、それを世界と共有する準備ができました。[`HACK`]を押し、ピクセルが変更され正しくコミットされたことを確認しましょう。